<!DOCTYPE html>
<html lang='en'>
<head>
	<meta charset="UTF-8">
	<title>WurmTerm</title>
	<link rel="stylesheet" type='text/css' href='css/styles.css'/>
	<link rel="stylesheet" type='text/css' href='starboard-notebook.css'/>

	<link rel="manifest" href="manifest.json">
	<meta name="theme-color" content="white"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
	<div id='menu'>
		<span class='title'>üêõ WurmTerm</span>
		[ <a data-view='main'>Home</a> ]
		[ <a data-view='notebook'>Notebook</a> ]
		[ <a data-view='settings'>Settings</a> ]
	</div>
	
	<div class='main' id='info'>
	</div>

	<div class='main' id='main'>
		<div id='visualContainer'>
			Visualization
			<select id='renderer'>
				<option value='netmap'>netmap</option>
				<option value='perfFlameGraph'>perf flamegraph</option>
			</select>
			Host
			<span id='visualizedHost'></span>
			<div id='visual'>
			</div>
		</div>
		<div id='nodes'>
		</div>
		<div id='footer'>
			<div class='title'>Your SSH History (click to connect)</div>
			<ul id='history'>
			</ul>
			<form id='hostForm'>
				Or enter hostname:<br/>
				<input id='hostEntry' type='text'/>
				<input type='submit' value='Connect'/>
			</form>
		</div>
	</div>

	<div class='main' id='notebook'>
		Host <input type='text' id='notebook-host' list='notebook-hosts' placeholder='localhost or SSH host' value='localhost'/>
		<datalist id='notebook-hosts'>
			<option value='localhost'>
		</datalist>

		Notebook <input type='text' id='notebook-name' list='notebook-names' placeholder='Name of a notebook' value='default'/>
		<datalist id='notebook-names'>
			<!-- FIXME load list automatically -->
			<option value='default'>
			<option value='systemd'>
		</datalist>
	</div>

	<div class='main' id='settings'>
		<h2>Refresh Interval</h2>

		<p>How often WurmTerm will look for new or disconnected hosts.</p>

		<input type="number" size="6" step="5" id="refreshInterval" name="refreshInterval" min="5">
		Seconds (min 5s)

		<h2>Active Probes</h2>

		<p>Control which probes you want to run. Toggle their status by clicking.</p>

		Enabled:
                <div class="settingsBox" id="probesEnabled"></div>
		Disabled:
                <div class="settingsBox" id="probesDisabled"></div>

		<h2>Backend Endpoint</h2>

		<input type="text" id="backendEndpoint" size="80">

		<p>Websocket endpoint of the WurmTerm backend (e.g. ws://localhost:8181). Please refresh the page after changing this value!</p>
	</div>

	<script type="text/javascript" src="js/lib/jquery.min.js"></script>
	<script type="text/javascript">
		window.initialNotebookContent = `
# %% [markdown]
## Running Commands with Wurmterm

This is a WurmTerm interactive notebook (similar to Jupyter notebooks). Try to trigger a shell 
command using the following cell, by clicking the play button on the left.

# %% [shell]
echo "Enter a command here!"
# %% [markdown]
## Examples

Running processes

# %% [shell]
ps -xawf | head -20
# %% [markdown]
Failed systemd units

# %% [shell]
systemctl --failed`;
	</script>
	<script type="text/javascript" src="starboard-notebook.js"></script>
	<script type="module">
		import { setupApp } from './js/app.js';

		(function() {
			'use strict';

			setupApp();
		})();
	</script>
</body>
</html>
